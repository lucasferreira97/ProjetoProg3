<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="css/styles.css">
	<title>Catolica SC PONG</title>
	<meta charset="UTF-8">
	<meta name="author" content="Lucas Silva, Andrey Schemel, Ricardo Alvize, Leonardo Alvize e Henrique Rueckert">
</head>

<body>

<div id="container1">

</div>

<div id="container2">

</div>

<script>
	var animate = window.requestAnimationFrame ||
	  window.webkitRequestAnimationFrame ||
	  window.mozRequestAnimationFrame ||
	  function(callback) { window.setTimeout(callback, 1000/60) };

	var canvas = document.createElement('canvas');
	var width = 400;
	var height = 600;
	canvas.width = width;
	canvas.height = height;
	canvas.style.float = "right";
	canvas.style.marginTop = "-600px";
	canvas.style.marginRight = "600px"
	var context = canvas.getContext('2d');

	window.onload = function() {
	  document.body.appendChild(canvas);
	  animate(step);
	};

	var step = function() {
	  update();
	  render();
	  animate(step);
	};

	var update = function() {
	};

	var render = function() {
	  context.fillStyle = "#000000";
	  context.fillRect(0, 0, width, height);
	};


	function Paddle(x, y, width, height) {
	  this.x = x;
	  this.y = y;
	  this.width = width;
	  this.height = height;
	  this.x_speed = 0;
	  this.y_speed = 0;
	}

	Paddle.prototype.render = function() {
	  context.fillStyle = "#00FF00";
	  context.fillRect(this.x, this.y, this.width, this.height);
	};

	function Player1() {
	   this.paddle = new Paddle(175, 580, 50, 10);
	}
	
	function Player2() {
	   this.paddle = new Paddle(175, 10, 50, 10);
	}

	Player1.prototype.render = function() {
	  this.paddle.render();
	};
	
	Player2.prototype.render = function() {
	  this.paddle.render();
	};

	var player1 = new Player1();
	var player2 = new Player2();

	var render = function() {
	  context.fillStyle = "#000000";
	  context.fillRect(0, 0, width, height);
	  player1.render();
	  player2.render();
	};

	var keysDown = {};

	window.addEventListener("keydown", function(event) {
	  keysDown[event.keyCode] = true;
	});

	window.addEventListener("keyup", function(event) {
	  delete keysDown[event.keyCode];
	});

	var update = function() {
	  player1.update();
	  player2.update();
	};

	Player1.prototype.update = function() {
	  for(var key in keysDown) {
		var value = Number(key);
		if(value == 37) { // seta esquerda
		  this.paddle.move(-4, 0);
		} else if (value == 39) { // seta direita
		  this.paddle.move(4, 0);
		} else {
		  this.paddle.move(0, 0);
		}
	  }
	};
	
	Player2.prototype.update = function() {
	  for(var key in keysDown) {
		var value = Number(key);
		if(value == 65) { // tecla A esquerda
		  this.paddle.move(-4, 0);
		} else if (value == 68) { // tecla D direita
		  this.paddle.move(4, 0);
		} else {
		  this.paddle.move(0, 0);
		}
	  }
	};

	Paddle.prototype.move = function(x, y) {
	  this.x += x;
	  this.y += y;
	  this.x_speed = x;
	  this.y_speed = y;
	  if(this.x < 0) { // maximo esquerdo
		this.x = 0;
		this.x_speed = 0;
	  } else if (this.x + this.width > 400) { // m√°ximo direito
		this.x = 400 - this.width;
		this.x_speed = 0;
	  }
	}

	</script>

</body>
</html>